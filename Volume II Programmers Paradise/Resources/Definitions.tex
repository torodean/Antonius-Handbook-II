\newcommand{\andspace}[1]{\hspace{#1}\textrm{and}\hspace{#1}}

\numberwithin{equation}{section}
\setlength{\columnsep}{.5cm}
\setlength{\columnseprule}{1pt}
\def\columnseprulecolor{\color{black}}

\newcommand{\abs}[1]{\left| #1 \right|}
\newcommand{\inner}[1]{\langle #1 \rangle}
\newcommand{\norm}[1]{\left\lVert#1\right\rVert}
\newcommand{\spanvect}{\textnormal{span}}
\newcommand{\union}{\cup}
\newcommand{\Union}{\bigcup}

\newcommand\idx[1]{\textbf{#1}\index{#1}}

%create a section without making the section title.
\newcommand\invisiblesection[1]{%
	\refstepcounter{section}%
	\addcontentsline{toc}{section}{\protect\numberline{\thesection}#1}%
	\sectionmark{#1}}

%Makes a chapter with no title
\makeatletter
\newcommand{\unchapter}[1]{%
	\begingroup
	\let\@makechapterhead\@gobble % make \@makechapterhead do nothing
	\chapter{#1}
	\endgroup
}
\makeatother


%%% This defines the solution environment for you to write your solutions
\newenvironment{soln}
{\let\oldqedsymbol=\qedsymbol
	\renewcommand{\qedsymbol}{$ $}
	\begin{proof}[\bfseries\upshape \color{blue}Derivation]\color{blue}}
	{\end{proof}
	\renewcommand{\qedsymbol}{\oldqedsymbol}}

\newenvironment{note}
{\let\oldqedsymbol=\qedsymbol
	\renewcommand{\qedsymbol}{$ $}
	\begin{proof}[\bfseries\upshape \color{red}Note]\color{red}}
	{\end{proof}
	\renewcommand{\qedsymbol}{\oldqedsymbol}}


%theorem
\newcounter{theo}[section] \setcounter{theo}{0}
\renewcommand{\thetheo}{\arabic{section}.\arabic{theo}}
\newenvironment{theo}[2][]{%
	\refstepcounter{theo}%
	\ifstrempty{#1}%
	{\mdfsetup{%
			frametitle={%
				\tikz[baseline=(current bounding box.east),outer sep=0pt]
				\node[anchor=east,rectangle,fill=blue!20]
				{\strut Theorem~\thetheo};}}
	}%
	{\mdfsetup{%
			frametitle={%
				\tikz[baseline=(current bounding box.east),outer sep=0pt]
				\node[anchor=east,rectangle,fill=blue!20]
				{\strut Theorem~\thetheo:~#1};}}%
	}%
	\mdfsetup{innertopmargin=10pt,linecolor=blue!20,%
		linewidth=2pt,topline=true,%
		frametitleaboveskip=\dimexpr-\ht\strutbox\relax
	}
	\begin{mdframed}[]\relax%
		\label{#2}}{\end{mdframed}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Lemma
\newcounter{lemm}[section] \setcounter{lemm}{0}
\renewcommand{\thelemm}{\arabic{chapter}.\arabic{lemm}}
\newenvironment{lemm}[2][]{%
	\refstepcounter{lemm}%
	\ifstrempty{#1}%
	{\mdfsetup{%
			frametitle={%
				\tikz[baseline=(current bounding box.east),outer sep=0pt]
				\node[anchor=east,rectangle,fill=green!20]
				{\strut Lemma~\thelem};}}
	}%
	{\mdfsetup{%
			frametitle={%
				\tikz[baseline=(current bounding box.east),outer sep=0pt]
				\node[anchor=east,rectangle,fill=green!20]
				{\strut Lemma~\thelem:~#1};}}%
	}%
	\mdfsetup{innertopmargin=10pt,linecolor=green!20,%
		linewidth=2pt,topline=true,%
		frametitleaboveskip=\dimexpr-\ht\strutbox\relax
	}
	\begin{mdframed}[]\relax%
		\label{#2}}{\end{mdframed}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Proof
\newcounter{prf}[section]\setcounter{prf}{0}
\renewcommand{\theprf}{\arabic{chapter}.\arabic{prf}}
\newenvironment{prf}[2][]{%
	\refstepcounter{prf}%
	\ifstrempty{#1}%
	{\mdfsetup{%
			frametitle={%
				\tikz[baseline=(current bounding box.east),outer sep=0pt]
				\node[anchor=east,rectangle,fill=red!20]
				{\strut Proof~\theprf};}}
	}%
	{\mdfsetup{%
			frametitle={%
				\tikz[baseline=(current bounding box.east),outer sep=0pt]
				\node[anchor=east,rectangle,fill=red!20]
				{\strut Proof~\theprf:~#1};}}%
	}%
	\mdfsetup{innertopmargin=10pt,linecolor=red!20,%
		linewidth=2pt,topline=true,%
		frametitleaboveskip=\dimexpr-\ht\strutbox\relax
	}
	\begin{mdframed}[]\relax%
		\label{#2}}{\qed\end{mdframed}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Definition
\newcounter{defn}[section] \setcounter{defn}{0}
\renewcommand{\thedefn}{\arabic{chapter}.\arabic{defn}}
\newenvironment{defn}[2][]{%
	\refstepcounter{defn}%
	\ifstrempty{#1}%
	{\mdfsetup{%
			frametitle={%
				\tikz[baseline=(current bounding box.east),outer sep=0pt]
				\node[anchor=east,rectangle,fill=gray!20]
				{\strut Definition~\thedefn};}}
	}%
	{\mdfsetup{%
			frametitle={%
				\tikz[baseline=(current bounding box.east),outer sep=0pt]
				\node[anchor=east,rectangle,fill=gray!20]
				{\strut Definition~\thedefn:~#1};}}%
	}%
	\mdfsetup{innertopmargin=10pt,linecolor=gray!20,%
		linewidth=2pt,topline=true,%
		frametitleaboveskip=\dimexpr-\ht\strutbox\relax
	}
	\begin{mdframed}[nobreak=true]\relax%
		\label{#2}}{\end{mdframed}}
%Fancy Box
\newcounter{fancybox}[section] \setcounter{fancybox}{0}
\renewcommand{\thefancybox}{\arabic{chapter}.\arabic{fancybox}}
\newenvironment{fancybox}[2][]{%
	\refstepcounter{fancybox}%
	\ifstrempty{#1}%
	{\mdfsetup{%
			frametitle={%
				\tikz[baseline=(current bounding box.east),outer sep=0pt]
				\node[anchor=east,rectangle,fill=orange!20]
				{\strut ~\thefancybox};}}
	}%
	{\mdfsetup{%
			frametitle={%
				\tikz[baseline=(current bounding box.east),outer sep=0pt]
				\node[anchor=east,rectangle,fill=orange!20]
				{\strut ~\thefancybox:~#1};}}%
	}%
	\mdfsetup{innertopmargin=10pt,linecolor=orange!20,%
		linewidth=2pt,topline=true,%
		frametitleaboveskip=\dimexpr-\ht\strutbox\relax
	}
	\begin{mdframed}[]\relax%
		\label{#2}}{\end{mdframed}}






% Define the questions environment
\newenvironment{questions}{%
	\begin{tcolorbox}[
		colback=orange!10,
		colframe=orange!50,
		arc=0pt,
		boxrule=1pt,
		title={\faQuestion\ Questions},
		fonttitle=\bfseries,
		coltitle=blue!50!black,
		colbacktitle=yellow!20,
		attach title to upper={\par},
		boxsep=0pt,
		]
		\begin{itemize}  % Start the itemize environment
			\BODY  % This will contain the list of questions
		\end{itemize}  % End the itemize environment
	\end{tcolorbox}
}

% define interesting note
\newenvironment{interestingnote}{
	\begin{tcolorbox}[
		colback=green!10,  % Very light green background color of the box
		colframe=green!50,  % Border color of the box
		arc=0pt,  % Adjust the corner radius of the box
		boxrule=1pt,  % Border thickness
		title={\faLightbulb\ Interesting Note},  % The lightbulb icon and title
		fonttitle=\bfseries,  % Font style for the title
		coltitle=blue!50!black,  % Color for the title text
		colbacktitle=yellow!20,  % Background color for the title
		attach title to upper={\par},
		boxsep=0pt,  % Adjust the space between the content and the box
		]
	}{
	\end{tcolorbox}
}

\definecolor{lightpurple}{RGB}{220,180,240}

\newenvironment{quotationbox}{
	\begin{tcolorbox}[
		colback=lightpurple!10,  % Very light purple background color of the box
		colframe=lightpurple!50,  % Border color of the box
		arc=0pt,  % Adjust the corner radius of the box
		boxrule=1pt,  % Border thickness
		title={\faQuoteLeft\ Quotation},  % The quotation icon and title
		fonttitle=\bfseries,  % Font style for the title
		coltitle=blue!50!black,  % Color for the title text
		colbacktitle=yellow!20,  % Background color for the title
		attach title to upper={\par},
		boxsep=0pt,  % Adjust the space between the content and the box
		]
	}{
	\end{tcolorbox}
}

% define a URL
\newenvironment{urlbox}{
	\begin{tcolorbox}[
		colback=blue!10,  % Very light green background color of the box
		colframe=blue!50,  % Border color of the box
		arc=0pt,  % Adjust the corner radius of the box
		boxrule=1pt,  % Border thickness
		title={URL},  % The lightbulb icon and title
		fonttitle=\bfseries,  % Font style for the title
		coltitle=blue!50!black,  % Color for the title text
		colbacktitle=yellow!20,  % Background color for the title
		attach title to upper={\par},
		boxsep=0pt,  % Adjust the space between the content and the box
		]
	}{
	\end{tcolorbox}
}

\newcommand{\unfinished}{%
	\par\noindent%
	\setlength{\fboxsep}{10pt} % Adjust the padding
	\fcolorbox{red}{red!20}{%
		\begin{minipage}{\dimexpr\linewidth-2\fboxsep}%
			\vspace{5pt} % Adjust the vertical spacing
			\centering
			\textcolor{red}{\textbf{\faExclamation\ Section in Progress\ \faExclamation}}
			\vspace{5pt} % Adjust the vertical spacing
		\end{minipage}%
	}%
	\par
}